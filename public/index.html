<!DOCTYPE html>
<html>
<head>    	
    <script src="/socket.io/socket.io.js"></script>
    <script src="phaser.js"></script>
    <script src="src/phaser-matter-collision-plugin.js"></script>
    <script src="src/preloader.js"></script>
    <script src="src/controller.js"></script>
    <script src="src/gamescene.js"></script>    
    <script src="src/hud.js"></script>
    <script src="src/menuscene.js"></script>
    <script src="src/storyboard.js"></script>
    <script src="src/credits.js"></script>
    <script src="src/solana.js"></script>
    <script src="src/bright.js"></script>
    <script src="src/soullight.js"></script>
    <script src="src/effects.js"></script>
    <script src="src/abilities.js"></script>
    <script src="src/addons.js"></script>
    <script src="src/bullet.js"></script>
    <script src="src/mirror.js"></script>
    <script src="src/barrier.js"></script>
    <script src="src/Exit.js"></script>
    <script src="src/trigger.js"></script>
    <script src="src/enemy.js"></script>
    <script src="src/items.js"></script>

    <style>
    @font-face {
	font-family: 'xirod';
	src: url('assets/fonts/xirod.eot');
	src: local('☺'), url('assets/fonts/xirod.woff') format('woff'), url('assets/fonts/xirod.ttf') format('truetype'), url('assets/fonts/xirod.svg') format('svg');
	font-weight: normal;
	font-style: normal;
    }
    @font-face {
        font-family: 'visitorTT1';
        src: url('assets/fonts/visitor/VisitorTT1BRK.eot');
        src: local('☺'), url('assets/fonts/visitor/VisitorTT1BRK.woff') format('woff'), url('assets/fonts/visitor/visitor1.ttf') format('truetype'), url('assets/fonts/visitor/VisitorTT1BRK.svg') format('svg');
        font-weight: normal;
        font-style: normal;
    }
    .fontLoader {
        position: absolute;
        left: -1000px;
        visibility: hidden;
    }
    </style>
</head>
<body>
    <div class="fontLoader" style="font-family: xirod;">-</div>
    <div class="fontLoader" style="font-family: visitorTT1;">-</div>
    <script>    
    var socket = io();
    var config = {
        type: Phaser.WEBGL,
        width: 1280,
        height: 896, 
        pixelArt: true,
        input: {
            gamepad: true
        },
        physics: {
            default: 'matter',
            arcade: {
                tileBias: 8,
                debug: false,
                gravity: { y: 400 }
            },
            matter: {
                gravity: { y: .70 }
            }
        },
        // Install the scene plugin
        plugins: {
            scene: [
            {
                plugin: PhaserMatterCollisionPlugin, // The plugin class
                key: "matterCollision", // Where to store in Scene.Systems, e.g. scene.sys.matterCollision
                mapping: "matterCollision" // Where to store in the Scene, e.g. scene.matterCollision
            }
            ]
        }, 
        scene: [ Preloader, MainMenu, GameScene, HudScene ]
    };
    
    //Globals
    //Global Game Access
    var game;
    var hud;
    var playScene;
    //Physics
    var global_gravity = 400;
    //Tiles
    var map; 
    var current_map = "map2";
    var current_exit = "west1";
    var world_background;
    //Game Objects
    var solana,
    bright,enemies,bullets,
    mirrors,exits,entrances,
    levers,gates,plates,buttons,
    triggerzones,platforms,barriers,
    ab_solarblasts,crystallamps;    
    var new_enemy;
    var spawner;
    var spawnlayer;
    //Controls
    var pointer;
    var prevJumpButtonPressed=false;
    var jumpTimer;
    var speed;
    var lastFired = 0;
    var gamePad;
    //Particles
    var emitter0;
    var emitter_blood;
    //HUD
    var scoreText;
    //Graphics
    var shadow_layer,shadow_context;
    //Camera
    var camera_main;
    //Player Management
    var isMultiplayer = false;
    const players  = {
        SOLANA: 'Solana',
        BRIGHT: 'Bright'
    }
    const CATEGORY = {
        SOLANA: 2,
        BRIGHT: 4,
        DARK: 8,
        BULLET: 16,
        MIRROR: 32,
        BARRIER: 64,
        GROUND: 128,
        SOLID: 256,
        ENEMY: 512
    }
    const DEPTH_LAYERS = {
        BG: 10,
        FG: 100,
        FRONT: 999
    }
    var curr_player = "Solana";

    //Debug:Version
    console.log(String(Phaser.VERSION));
    //Font Preloader
    
    //Game
    var game = new Phaser.Game(config);
    
    //CREDITS
    //“Sound effects obtained from https://www.zapsplat.com“

    </script>

</body>
</html>